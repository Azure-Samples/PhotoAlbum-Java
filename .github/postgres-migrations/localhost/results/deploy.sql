-- Oracle → PostgreSQL Migration Deployment Script
-- Generated: 2025-11-10T16:43:46.032575
-- Migration Project: localhost
-- Total Objects: 3
-- PostgreSQL Version: 15+
--
-- This script contains the complete migrated schema in dependency order.
-- Execute this script against your target PostgreSQL database.
--
-- IMPORTANT: 
-- - Review this script before execution
-- - Ensure target database has appropriate permissions
-- - Consider running in a transaction for safety
--
-- BEGIN MIGRATION DEPLOYMENT
-- ==========================================

BEGIN;

-- Migration deployment started
DO $$
BEGIN
    RAISE NOTICE 'Starting Oracle → PostgreSQL migration deployment at %', NOW();
END $$;

-- PUBLIC.photoalbum (SCHEMA)
-- Source: artifacts\postgres\PUBLIC\SCHEMA\photoalbum.sql
CREATE SCHEMA IF NOT EXISTS photoalbum;

-- photoalbum.photos (TABLE)
-- Source: artifacts\postgres\photoalbum\TABLE\photos.sql
CREATE TABLE IF NOT EXISTS photoalbum.photos (
    id VARCHAR(36) NOT NULL,
    file_path VARCHAR(500),
    file_size BIGINT NOT NULL,
    height BIGINT,
    mime_type VARCHAR(50) NOT NULL,
    original_file_name VARCHAR(255) NOT NULL,
    photo_data BYTEA,
    stored_file_name VARCHAR(255) NOT NULL,
    uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    width BIGINT,
    CONSTRAINT photos_pkey PRIMARY KEY (id)
);

-- PUBLIC.idx_photos_uploaded_at (INDEX)
-- Source: artifacts\postgres\PUBLIC\INDEX\idx_photos_uploaded_at.sql
CREATE INDEX IF NOT EXISTS idx_photos_uploaded_at ON photoalbum.photos ("uploaded_at");


-- Migration deployment completed
DO $$
BEGIN
  RAISE NOTICE 'Oracle → PostgreSQL migration deployment completed successfully at %', NOW();
END $$;

COMMIT;

-- END MIGRATION DEPLOYMENT
-- ==========================================
-- 
-- Migration deployment script generated by Oracle Migration Service
-- For support and documentation, visit: https://github.com/microsoft/vscode-postgresql
